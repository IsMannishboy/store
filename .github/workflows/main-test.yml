name: main test  

on:
  push:
    branches: dev
    paths:
      - "app/**"
    
  

jobs:


  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: testiki
      run: |
        docker compose up --build -d
        services=($(docker ps --format "{{.Names}}"))
        for dir in $services;do
          echo "container:$dir"
          docker exec -i $dir  go test ./...
          
        done
    

